[build]
builder = "nixpacks"

[deploy]
startCommand = "php artisan serve --host=0.0.0.0 --port=$PORT"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

[env]
NODE_ENV = "production"
APP_ENV = "production"
APP_DEBUG = "false"
LOG_CHANNEL = "stderr"
LOG_LEVEL = "error"

# Asset configuration for Railway
ASSET_URL = "https://${{RAILWAY_PUBLIC_DOMAIN}}/build"

# Database configuration
DB_CONNECTION = "mysql"
DB_HOST = "${{MYSQLHOST}}"
DB_PORT = "${{MYSQLPORT}}"
DB_DATABASE = "${{MYSQLDATABASE}}"
DB_USERNAME = "${{MYSQLUSER}}"
DB_PASSWORD = "${{MYSQLPASSWORD}}"

# Cache and session configuration
CACHE_DRIVER = "file"
SESSION_DRIVER = "file"
QUEUE_CONNECTION = "sync"

# File system configuration
FILESYSTEM_DISK = "local"
